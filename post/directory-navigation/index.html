<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Aswin&#39;s Site - How I navigate directories? </title>

    
    
    <meta content="how-to, interactive, cli-hacks" name="keywords">
    
    <meta content="Aswin&#39;s Site - I do not use any autojump tools to navigate across my project directories. A simple bash function does the job for me. Customization is the main reason.
The tools I use to create the functions can be replaced with GNU tools. I use them because they are fast and have some additional features like respect .gitignore file. Let&rsquo;s create the function.
Steps 1. Find directories or files to navigate to I need a way to list all the directories I am interested in." name="description">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    

    

    
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-146772394-1"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments)};
          gtag('js', new Date());
          gtag('config', 'UA-146772394-1');
        </script>
    

    
    
    <script type="text/javascript" async
        src="/mathjax-3.0.0/tex-mml-chtml.js">
    </script>
    

    <link rel="stylesheet" href="/layui/css/layui.css">
    <link rel="stylesheet" href="/self/css/default.css">
    <script src="/layui/layui.js"></script>


    <link rel="stylesheet" async href="/self/css/markdown.min.css">
    <link rel="stylesheet" async href="/self/css/gallery.css">
    <link rel="stylesheet" async href="/font-awesome-4.7.0/css/font-awesome.min.css">
    <script src="/self/js/lazysizes.min.js" async></script></head>
<body>
    
    <header class="layui-header layui-bg-cyan">

    
    
    <a class="nav-self-logo" href="/">
        Aswin&#39;s Site
    </a>

    <ul class="layui-nav layui-layout-right layui-bg-cyan" lay-filter="">
        
        
        <li class="layui-nav-item" id="nav_big"><a href="/post/">Posts</a></li>
        

        
            
                <li class="layui-nav-item" id="nav_big"><a href="/">Home</a></li>
            
                <li class="layui-nav-item" id="nav_big"><a href="/about/">About</a></li>
            
        

        
        <li class="layui-nav-item" id="nav_small">
            <a href="javascript:;">
                <i class="layui-icon layui-icon-app" style="font-size: 24px;"></i>
            </a>

            <dl class="layui-nav-child">
                
                <dd><a href="/post/">Posts</a></dd>
                

                
                    <dd><a href="/">Home</a></dd>
                
                    <dd><a href="/about/">About</a></dd>
                
            </dl>
        </li>
    </ul>
</header>

<script>
layui.use('element', function(){
  var element = layui.element;
});
</script>
        <div id="content" style="min-height:80%">
<div class="layui-container" style="margin-bottom: 10px">
    

    <div class="layui-row layui-col-space10">
        <div class="layui-col-md8 layui-col-sm12 layui-col-xs12">
            <div class="layui-card single-card">
                <br />
                <blockquote class="layui-elem-quote markdown-body single-title" >
                    <h1>How I navigate directories?</h1>
                    <h3 style="margin-top:10px; margin-bottom:10px"> 
    <i class="layui-icon layui-icon-date" style="font-size: 24px; vertical-align: -2px;"></i>
    <span>2019-08-30</span>

    
    <i class="layui-icon layui-icon-tabs" style="font-size: 22px; vertical-align: 0px;"></i>
    
        <a href="/tags/how-to">
            <span class="layui-badge" style="vertical-align: 2px;">how-to</span>
        </a>
    
        <a href="/tags/interactive">
            <span class="layui-badge" style="vertical-align: 2px;">interactive</span>
        </a>
    
        <a href="/tags/cli-hacks">
            <span class="layui-badge" style="vertical-align: 2px;">cli-hacks</span>
        </a>
    
</h3>
                </blockquote>
                <div class="layui-card-body markdown-body single-content">
                    

<p>I do not use any <code>autojump</code> tools to navigate across my project directories. A simple <code>bash</code> function does the job for me. Customization is the main reason.</p>

<p>The tools I use to create the functions can be replaced with GNU tools. I use them because they are fast and have some additional features like respect <code>.gitignore</code> file. Let&rsquo;s create the function.</p>

<h2 id="steps">Steps</h2>

<h3 id="1-find-directories-or-files-to-navigate-to">1. Find directories or files to navigate to</h3>

<p>I need a way to list all the directories I am interested in. This could be directories under your project dir (for me, it is <code>${HOME}/projects</code>).</p>

<pre><code class="language-bash">$ fd . -d 5 ${HOME}/project/ -E vendor
</code></pre>

<p>This lists all directories in my project directory till 5 depth. By default <a href="https://github.com/sharkdp/fd">fd</a> ignores git-ignored files and directories. I am also excluding <code>vendor</code> directory for my golang projects as sometimes they are not git-ignored.</p>

<blockquote>
<p>Note: Use any finder instead fd. GNU find will work too.</p>
</blockquote>

<h3 id="2-open-an-interactive-fuzzy-finder">2. Open an interactive fuzzy-finder</h3>

<p>Now, we have a huge list of results. Pipe the results to <a href="https://github.com/junegunn/fzf">fzf</a></p>

<pre><code class="language-bash">$ fd . -d 5 ${HOME}/project/ -E vendor | fzf
</code></pre>

<p><img src="/directory-navigation/image-1.png" alt="Interactive mode through FZF" /></p>

<p>The selection is returned as a result of the command. We could choose to handle however we want if its a directory.</p>

<pre><code class="language-bash">function godir {
    directory=$(fd -E vendor -d 5 . ${HOME}/project/ | fzf --color 16)
    if [ ! -z  &quot;$directory&quot; ]; then
        if [ ! -d &quot;$directory&quot; ]; then
            # Its a file. cd to the directory.
            cd $(dirname &quot;$directory&quot;)
        else
            # cd to the directory
            cd $directory
        fi
    fi
}

$ godir # opens an interactive finder now
</code></pre>

<p>We have a basic interactive finder now. Let&rsquo;s add a little bit of preview feature before deciding to change directory.</p>

<blockquote>
<p>Alternatives: <a href="https://github.com/jhawthorn/fzy">jhawthorn/fzy</a>, <a href="https://github.com/lotabout/skim">lotabout/skim</a></p>
</blockquote>

<h3 id="3-preview">3. Preview</h3>

<p><code>fzf</code> allows us to run a preview command before actually making the selection. Lets do the following,</p>

<ul>
<li>If its a directory, list the files.</li>
<li>If its a file, preview the file</li>
</ul>

<pre><code class="language-bash">function previewSelection {
    directory=$1
    if [ ! -z  &quot;$directory&quot; ]; then
        if [ ! -d &quot;$directory&quot; ]; then
            # cat but with syntax highlighting
            bat --color=always &quot;$directory&quot;
        else
            # ls with colors and git-aware
            exa --color=always -l --git --git-ignore -h $directory
        fi
    fi
}

# Export the function
export -f previewSelection
</code></pre>

<p>Now, in our previous function we change our fzf to preview our selection.</p>

<pre><code class="language-bash">fd -E vendor -d 5 . ${HOME}/project/ | fzf --color 16 --preview &quot;previewSelection {}&quot;
</code></pre>

<p><strong>Preview a directory with exa:</strong></p>

<p><img src="/directory-navigation/image-2.png" alt="preview-a-directory" /></p>

<blockquote>
<p>Alternatives: You could just use <code>ls</code>.</p>
</blockquote>

<p><strong>Preview a file with bat:</strong></p>

<p><img src="/directory-navigation/image-3.png" alt="preview-a-file" /></p>

<blockquote>
<p>Alternatives: <code>cat</code> or any other highlight tool you would want.</p>
</blockquote>

<h3 id="4-our-final-script">4. Our final script</h3>

<pre><code class="language-bash">function previewSelection {
    directory=$1
    if [ ! -z  &quot;$directory&quot; ]; then
        if [ ! -d &quot;$directory&quot; ]; then
            # cat but with syntax highlighting
            bat --color=always &quot;$directory&quot;
        else
            # ls with colors and git-aware
            exa --color=always -l --git --git-ignore -h $directory
        fi
    fi
}

# Export the function
export -f previewSelection

function godir {
    directory=$(fd -E vendor -d 5 . ${HOME}/project/ | fzf --color 16 --preview &quot;previewSelection {}&quot; )
    if [ ! -z  &quot;$directory&quot; ]; then
        if [ ! -d &quot;$directory&quot; ]; then
            # Its a file. cd to the directory.
            cd $(dirname &quot;$directory&quot;)
        else
            # cd to the directory
            cd $directory
        fi
    fi
}
</code></pre>

<h3 id="tools-reference">Tools Reference</h3>

<ul>
<li><a href="https://github.com/sharkdp/fd">sharkdp/fd</a></li>
<li><a href="https://github.com/sharkdp/bat">sharkdp/bat</a></li>
<li><a href="https://github.com/ogham/exa">ogham/exa</a></li>
<li><a href="https://github.com/junegunn/fzf">junegunn/fzf</a></li>
</ul>
</div>
            </div>
        </div>

        
        <div class="layui-col-md4 layui-col-sm12 layui-col-xs12">
            <div class="layui-card single-card">
                <h1 class="single-title">Relevant Topics</h1>
                
                	
                    <div style="margin-left: 10px;">
                        <blockquote class="layui-elem-quote" style="background-color:#FFFFFF;margin-top: 10px;">
                            <a href="https://aswinkarthik.dev/post/setting-up/">
                                <h2 class="">Setting up this Blog</h2>
                            </a>
                            <h3 style="margin-top:10px; margin-bottom:10px"> 
    <i class="layui-icon layui-icon-date" style="font-size: 24px; vertical-align: -2px;"></i>
    <span>2019-08-28</span>

    
    <i class="layui-icon layui-icon-tabs" style="font-size: 22px; vertical-align: 0px;"></i>
    
        <a href="/tags/blog">
            <span class="layui-badge" style="vertical-align: 2px;">blog</span>
        </a>
    
        <a href="/tags/how-to">
            <span class="layui-badge" style="vertical-align: 2px;">how-to</span>
        </a>
    
</h3>
                        </blockquote>
                    </div>
                	
                
                <br />
            </div>
        </div>
        
    </div>
</div>


        </div><footer>
    
    
    <div class="layui-container">
        <p class="copyright">Copyright © 2019 aswinkarthik.dev</p>
    </div>
</footer>
</body>
</html>
